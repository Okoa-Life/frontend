{"ast":null,"code":"import _regeneratorRuntime from\"/home/priscah/workshops/react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/priscah/workshops/react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/priscah/workshops/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useEffect,useState}from\"react\";import{listDocs}from\"@junobuild/core\";import{AuthContext}from\"./Auth\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export var Table=function Table(){var _useContext=useContext(AuthContext),user=_useContext.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];useEffect(function(){window.addEventListener(\"reload\",list);return function(){window.removeEventListener(\"reload\",list);};},[]);var list=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$listDocs,items;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return listDocs({// collection: \"notes\",\ncollection:\"esp32data\"});case 2:_yield$listDocs=_context.sent;items=_yield$listDocs.items;setItems(items);case 5:case\"end\":return _context.stop();}},_callee);}));return function list(){return _ref.apply(this,arguments);};}();console.log(items);useEffect(function(){if([undefined,null].includes(user)){setItems([]);return;}_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return list();case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}},_callee2);}))();},[user]);var PayloadCard=function PayloadCard(_ref3){var item=_ref3.item,index=_ref3.index,temperature=_ref3.temperature,heartRate=_ref3.heartRate,location=_ref3.location;return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Location: \",temperature]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Heart Rate: \",heartRate]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Temperature: \",location]})]});};return/*#__PURE__*/_jsx(\"div\",{className:\"w-full max-w-2xl mx-auto bg-white shadow-lg rounded-sm border border-gray-200 mt-8\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"px-5 py-4 border-b border-gray-100\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-semibold text-gray-800\",children:\"Entries\"}),/*#__PURE__*/_jsx(\"div\",{children:\"ESP32 Data Output\"}),/*#__PURE__*/_jsx(\"div\",{id:\"app\",children:items.map(function(item,index){return/*#__PURE__*/ (//   <PayloadCard key={index} item={item} index={index} />\n// ))}\n_jsx(PayloadCard,{item:item,index:index,temperature:item.data.esp32Data.temperature.$numberDouble,heartRate:item.data.esp32Data.heartrate.$numberInt,location:item.data.esp32Data.loc},index));})})]})});};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}